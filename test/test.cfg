process CALIBTEST  = {
  
    include "FWCore/MessageLogger/data/MessageLogger.cfi"

    untracked PSet options = {
        untracked bool wantSummary = true
    }
	
    #
    # Source
    #
    #include "Calibration/CalibTreeMaker/data/EmptyPoolSource.cfi"
    #include "Calibration/CalibTreeMaker/data/jet_jet.cfi"
    include "Calibration/Examples/test/testSample.cff"
    #untracked PSet maxEvents = {untracked int32 input = 100}
    #
    # PoolSource
    #
    #include "Calibration/CalibTreeMaker/data/RelVal-RelValSinglePi.cfi"
    untracked PSet maxEvents = {untracked int32 input = -1}
 
    #-----------------------------------------------------------------
    # run isolation tool with calorimeter isolation
    include "Calibration/CalibSamples/data/PhotonJetSample.cff"

    #-----------------------------------------------------------------
    #Geometry
    #include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/CaloEventSetup/data/CaloGeometry.cff"
#    include "Geometry/CaloEventSetup/test/data/testCaloConfiguration.cfi"

#    #
#    # Run isolation tool on tracks with isolation against other tracks
#    #
#    include "PhysicsTools/IsolationAlgos/data/TrackTrackIsolation.cfi"
#    replace TrackTrackIsolation.src      = ctfWithMaterialTracks
#    replace TrackTrackIsolation.elements = ctfWithMaterialTracks
#    replace TrackTrackIsolation.dRMin    = 0.2
#    replace TrackTrackIsolation.dRMax    = 0.5
#
#    #
#    # Run isolation tool on CaloTowers with isolation against Cal
#    #
#    include "PhysicsTools/IsolationAlgos/data/CaloTowerCalIsolation.cfi"
#    replace CaloTowerCalIsolation.src      = towerMaker
#    replace CaloTowerCalIsolation.elements = towerMaker
#    replace CaloTowerCalIsolation.dRMin    = 0.2
#    replace CaloTowerCalIsolation.dRMax    = 0.5
#
#    #
#    # TrackTowerProducer
#    #
#    include "CalibSamples/PhotonJetProducer/data/TrackTowerProducer.cfi"
#    replace TrackTowerProducer.Tracks  	  = ctfWithMaterialTracks
#    replace TrackTowerProducer.Towers  	  = towerMaker
#    replace TrackTowerProducer.TrackIsolation    = TrackTrackIsolation
#    replace TrackTowerProducer.TowerIsolation    = CaloTowerCalIsolation
#    replace TrackTowerProducer.TrackPtMin	  = 2.
#    replace TrackTowerProducer.TowerPtMin	  = 2.
#    replace TrackTowerProducer.EtaMin  	  = 2.5
#    replace TrackTowerProducer.MaxTrackIsolation = 0.5
#    replace TrackTowerProducer.MaxTowerIsolation = 0.5
#    replace TrackTowerProducer.DeltaPhi	  = 0.01
#    replace TrackTowerProducer.DeltaEta	  = 0.01
#
#    #-----------------------------------------------------------------
#    #-----------------------------------------------------------------
#    #Track/Cluster stuff:
#    #
#    # TrackClusterProducer
#    #
#    include "Calibration/TrackClusterProducer/data/TrackClusterProducer.cfi"
#    replace TrackClusterProducer.Tracks	    = ctfWithMaterialTracks
#    replace TrackClusterProducer.Towers	    = towerMaker
#    replace TrackClusterProducer.TrackIsolation    = TrackTrackIsolation
#    replace TrackClusterProducer.TrackPtMin	    = 10.
#    replace TrackClusterProducer.EtaMin	    = 2.5
#    replace TrackClusterProducer.MaxTrackIsolation = 2.0
#    replace TrackClusterProducer.MaxTowerIsolation = 5.0
#    replace TrackClusterProducer.OuterTowerIsoR    = 0.8
#    replace TrackClusterProducer.InnerTowerIsoR    = 0.5
#
#    #
#    # TrackClusterFilter
#    #
#    #include "Calibration/TrackTowerFilter/data/TrackTowerFilter.cfi"
#    #replace TrackTowerFilter.Track  = TrackTowerProducer:Track
#    #replace TrackTowerFilter.Tower  = TrackTowerProducer:Tower
#    #-----------------------------------------------------------------
#
    #-----------------------------------------------------------------
    # CalibTreeMaker for PhotonJet
    #
    #include "Calibration/CalibTreeMaker/data/CalibTreeMaker.cfi"
    module calibmaker_PhotonJet = calibmaker from "Calibration/CalibTreeMaker/data/CalibTreeMaker.cfi"
    replace calibmaker_PhotonJet.jets	 = photonJetSample:LeadingJet
    replace calibmaker_PhotonJet.genjets = photonJetSample:LeadingGenJet
    replace calibmaker_PhotonJet.photon  = photonJetSample:LeadingPhoton
#    replace calibmaker_PhotonJet.track   = TrackTowerProducer:Track
#    replace calibmaker_PhotonJet.tower   = TrackTowerProducer:Tower
    replace calibmaker_PhotonJet.writeGammaJet   = true
    replace calibmaker_PhotonJet.OutputFile = "PhotonJet.root"

#    #-----------------------------------------------------------------
#
#    #-----------------------------------------------------------------
#    # CalibTreeMaker for TrackTower
#    #
#    #include "Calibration/CalibTreeMaker/data/CalibTreeMaker.cfi"
#    module calibmaker_TrackTower = calibmaker from "Calibration/CalibTreeMaker/data/CalibTreeMaker.cfi"
#    replace calibmaker_TrackTower.jets    = PhotonJetProducer:leadingCaloJet
#    replace calibmaker_TrackTower.genjets = PhotonJetProducer:leadingGenJet
#    replace calibmaker_TrackTower.photon  = PhotonJetProducer:leadingPhoton
#    replace calibmaker_TrackTower.track   = TrackTowerProducer:Track
#    replace calibmaker_TrackTower.tower   = TrackTowerProducer:Tower
#    replace calibmaker_TrackTower.writeTrackTower = true
#    replace calibmaker_TrackTower.OutputFile = "trackTower.root"
#    #-----------------------------------------------------------------
#
#    #-----------------------------------------------------------------
#    # CalibTreeMaker for TrackCluster
#    #
#    #include "Calibration/CalibTreeMaker/data/CalibTreeMaker.cfi"
#    module  calibmaker_TrackCluster = calibmaker from "Calibration/CalibTreeMaker/data/CalibTreeMaker.cfi"
#    replace calibmaker_TrackCluster.jets    = PhotonJetProducer:leadingCaloJet
#    replace calibmaker_TrackCluster.genjets = PhotonJetProducer:leadingGenJet
#    replace calibmaker_TrackCluster.photon  = PhotonJetProducer:leadingPhoton
#    replace calibmaker_TrackCluster.track   = TrackTowerProducer:Track
#    replace calibmaker_TrackCluster.tower   = TrackTowerProducer:Tower
#    replace calibmaker_TrackCluster.tc_track	= TrackClusterProducer:Track
#    replace calibmaker_TrackCluster.tc_tower	= TrackClusterProducer:Towers
#    replace calibmaker_TrackCluster.writeTrackCluster = true
#    replace calibmaker_TrackCluster.OutputFile = "trackCluster.root"
#    #-----------------------------------------------------------------
#
#    #-----------------------------------------------------------------
#    # CalibTreeMaker for JetJet
#    #
#    #include "Calibration/CalibTreeMaker/data/CalibTreeMaker.cfi"
#    module  calibmaker_JetJet = calibmaker from "Calibration/CalibTreeMaker/data/CalibTreeMaker.cfi"
#    replace calibmaker_JetJet.writeJetJet = true
#    replace calibmaker_JetJet.OutputFile = "JetJet.root"
#    #-----------------------------------------------------------------
#
#    #sequence TrackTowerNeeded = { TrackTrackIsolation, CaloTowerCalIsolation, TrackTowerProducer }
#    #sequence PhotonJetNeeded =   { photonCalIsolation, photonHCalIsolation, PhotonJetProducer }
#    #sequence TrackClusterNeeded = { TrackTrackIsolation, TrackClusterProducer }
#    #sequence JetJetNeeded =	{  }
#
#    #path TrackTower = { PhotonJetNeeded, TrackTowerNeeded, TrackTowerFilter, calibmaker_TrackTower }
#    #path PhotonJet = { PhotonJetNeeded, TrackTowerNeeded, PhotonJetFilter, calibmaker_PhotonJet }
#    #path TrackCluster = { TrackClusterNeeded, calibmaker_TrackCluster }
#    #path TrackCluster = {calibmaker_JetJet }
    
    path  photonjet = {makePhotonJetSample, calibmaker_PhotonJet}

    #endpath p = {}
}

