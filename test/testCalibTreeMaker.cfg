process Test = {
# output level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cerr.threshold = "WARNING"

#
# PoolSource
#
    untracked PSet maxEvents = {untracked int32 input = -1}
    include "Calibration/CalibTreeMaker/test/EmptyPoolSource.cfi"
    #include "Calibration/CalibTreeMaker/test/files_DESY_CSA07JetMET-Gumbo-B1-PDJetMET_Skims2.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA07-Gumbo-B1-PDAllEvents-ReReco-100pb-Skims1-photonjets.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA07-Chowder-A4-PDAllEvents-ReReco-100pb-Skims1-photonjets.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA07-Stew-B2-PDAllEventsReReco-100pb-Skims1-photonjets.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET80_S156_v1.cfg"

    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET20_STARTUP_V2.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET30_STARTUP_V2.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET50_STARTUP_V2.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET80_STARTUP_V2.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET110_STARTUP_V2.cfg"
    
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET20_S156_v1.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET30_S156_v1.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET50_S156_v1.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET80_S156_v1.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET110_S156_v1.cfg"
    #include "Calibration/CalibTreeMaker/test/files_CSA08_JetET150_S156_v1.cfg"

    include "Calibration/CalibTreeMaker/test/files_CSA08_GammaJet_S156_v1.cfg"

# produce calib input
  include "Calibration/CalibTreeMaker/data/CalibTreeMaker.cff"

    #
    # dump event content
    #
    module dump = EventContentAnalyzer {}

#---------------------------------------------------------------
# replacements
#---------------------------------------------------------------

# photon jet sample

  replace photonCalIsolation.src              = photons
  replace photonCalIsolation.dRMax            =  0.70
  replace photonJetSample.Photons             = photons
  replace photonJetSample.GenPhotons          = genParticles
  replace photonJetSample.Jets                = sisCone5CaloJets
  replace photonJetSample.GenJets             = sisCone5GenJets
  replace photonJetFilter.MinPhotonPt         =  0.
  replace photonJetFilter.MaxPhotonEta        =  2.5
  replace photonJetFilter.MinJetPt            =  0.
  replace photonJetFilter.MaxJetEta           =  5.
  replace photonJetFilter.MaxIsolation        =  2.
  replace photonJetFilter.MaxNonleadingJetsPt =  5.
  replace photonJetFilter.MaxSecondJetPt      =  5.
  replace photonJetFilter.MaxDeltaPhi         =  0.10
  replace photonJetFilter.Debug               = false

# track tower sample

  replace trackTrkIsolation.dRMax             =  0.5
  replace trackTowerSample.MaxIsolation       = 20.
  replace trackTowerSample.MinPt              = 10.
  replace trackTowerSample.MaxEta             =  3.
  replace trackTowerSample.MaxTrkLength       =  0.
  replace trackTowerSample.MaxChiSquare       =100.
  replace trackTowerSample.MinNumOfHits       =  5
  replace trackTowerSample.MaxDeltaPhi        =  0.1
  replace trackTowerSample.MaxDeltaEta        =  0.1
  replace trackTowerSample.GroupNTowers       =  1   

# calibration tree

  replace calibTreeMaker.OutputFile           ="GammaJet_S156_v1_SISCone5.root"

  replace calibTreeMaker.PhotonJetTreeName    ="GammaJetTree"
  replace calibTreeMaker.PhotonJetJets        = photonJetSample:LeadingJet
  replace calibTreeMaker.PhotonJetGenJets     = photonJetSample:LeadingGenJet
  replace calibTreeMaker.PhotonJetPhotons     = photonJetSample:LeadingPhoton
  replace calibTreeMaker.PhotonJetGenPhotons  = photonJetSample:LeadingGenPhoton
  replace calibTreeMaker.PhotonJetMet         = met
  replace calibTreeMaker.WritePhotonJetTree   = true

#  replace calibTreeMaker.TrackTowerTreeName   ="TrackTowerTree"
#  replace calibTreeMaker.TrackTowerTracks     = trackTowerSample:IsolatedTrack
#  replace calibTreeMaker.TrackTowerTowers     = trackTowerSample:AssociatedTowers
#  replace calibTreeMaker.WriteTrackTowerTree  = false

#  replace calibTreeMaker.JetJetTreeName     ="JetJetTree"
#  replace calibTreeMaker.JetJetJets         = sisCone5CaloJets
#  replace calibTreeMaker.JetJetGenJets      = iterativeCone5GenJetsPt10
#  replace calibTreeMaker.JetJetMET          = met
#  replace calibTreeMaker.etaMaxTag          = 1.5
#  replace calibTreeMaker.etaMaxProbe        = 5.0
#  replace calibTreeMaker.PtMin              = 1.
#  replace calibTreeMaker.sumPtMaxFracThird  = 0.1
#  replace calibTreeMaker.deltaPhiJetMax     = 0.15
#  replace calibTreeMaker.deltaPhiMETMax     = 0.15
#  replace calibTreeMaker.minEMF             = 0.10
#  replace calibTreeMaker.maxEMF             = 0.90
#  replace calibTreeMaker.WriteJetJetTree    = false

  path p1 = {dump} 
  path p2 = {makePhotonJetTree}
  #path p3 = {makeTrackTowerTree}
  #path p4 = {makeJetJetTree}

  schedule = {p2}

#  endpath p = {makeTrackTowerTree}
#  endpath p = {makeAllTrees}

}
