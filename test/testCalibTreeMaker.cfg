process Test = {
# output level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cerr.threshold = "WARNING"

# input file(s)
  include "Calibration/Examples/test/testSample.cff"
  untracked PSet maxEvents = {untracked int32 input = -1}

# produce calib input
  include "Calibration/CalibTreeMaker/data/CalibTreeMaker.cff"

#---------------------------------------------------------------
# replacements
#---------------------------------------------------------------

# photon jet sample

  replace photonCalIsolation.dRMin            =  0.20
  replace photonCalIsolation.dRMax            =  0.70
  replace photonJetSample.Photons             = correctedPhotons
  replace photonJetSample.Jets                = iterativeCone5CaloJets
  replace photonJetSample.GenJets             = iterativeCone5GenJets
  replace photonJetFilter.MinPhotonPt         =  0.
  replace photonJetFilter.MaxPhotonEta        =  2.5
  replace photonJetFilter.MinJetPt            =  0.
  replace photonJetFilter.MaxJetEta           =  5.
  replace photonJetFilter.MaxIsolation        =  2.
  replace photonJetFilter.MaxNonleadingJetsPt =  5.
  replace photonJetFilter.MaxSecondJetPt      =  5.
  replace photonJetFilter.MaxDeltaPhi         =  0.10
  replace photonJetFilter.Debug               = false

# track tower sample

  replace trackTrkIsolation.dRMax             =  0.5
  replace trackTowerSample.MaxIsolation       = 20.
  replace trackTowerSample.MinPt              = 10.
  replace trackTowerSample.MaxEta             =  3.
  replace trackTowerSample.MaxTrkLength       =  0.
  replace trackTowerSample.MaxChiSquare       =100.
  replace trackTowerSample.MinNumOfHits       =  5
  replace trackTowerSample.MaxDeltaPhi        =  0.1
  replace trackTowerSample.MaxDeltaEta        =  0.1
  replace trackTowerSample.GroupNTowers       =  1   

# calibration tree

  replace calibTreeMaker.OutputFile           ="testCalibTreeMaker.root"

  replace calibTreeMaker.PhotonJetTreeName    ="GammaJetTree"
  replace calibTreeMaker.PhotonJetJets        = photonJetSample:LeadingJet
  replace calibTreeMaker.PhotonJetGenJets     = photonJetSample:LeadingGenJet
  replace calibTreeMaker.PhotonJetPhotons     = photonJetSample:LeadingPhoton
  replace calibTreeMaker.PhotonJetGenPhotons  = photonJetSample:LeadingGenPhoton
  replace calibTreeMaker.PhotonJetMet         = met
  replace calibTreeMaker.WritePhotonJetTree   = false

  replace calibTreeMaker.TrackTowerTreeName   ="TrackTowerTree"
  replace calibTreeMaker.TrackTowerTracks     = trackTowerSample:IsolatedTrack
  replace calibTreeMaker.TrackTowerTowers     = trackTowerSample:AssociatedTowers
  replace calibTreeMaker.WriteTrackTowerTree  = true

  endpath p = {makePhotonJetTree}
#  endpath p = {makeTrackTowerTree}
#  endpath p = {makeAllTrees}
}
